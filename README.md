
<!-- README.md is generated from README.Rmd. Please edit that file -->

# raspa.divulga.dados.tse

Pacote criado para facilitar o acesso a analistas aos dados
disponibilizados pelo portal
<https://divulgacandcontas.tse.jus.br/divulga/#/>.

# Usagem

Atualmente o pacote retorna 2 funções, a primeira que baixa as
informações da api do portal. Primeiro carregamos o pacote

``` r
library(raspa.divulga.dados.tse)
```

A primeira baixa as informações dos candidatos, via api do site.

``` r
dados_dep_est_PE <- raspa.divulga.dados.tse::pega_info_cand(ano = 2022,
                                        sigla_estado = "PE",
                                        cod_cargo = 7)
```

``` r
dplyr::glimpse(dados_dep_est_PE)
#> Rows: 578
#> Columns: 22
#> $ id                    <dbl> 170001722253, 170001619693, 170001718131, 170001…
#> $ nome_urna             <chr> "ABELARDO CABRAL", "ABIMAEL DOS SANTOS PEREIRA",…
#> $ numero_3              <int> 35222, 22010, 33644, 40700, 11000, 22345, 70333,…
#> $ id_candidato_superior <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ cpf                   <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ descricao_cor_raca    <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ descricao_situacao    <chr> "Aguardando julgamento", "Aguardando julgamento"…
#> $ grau_instrucao        <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ ocupacao              <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ nome_coligacao        <chr> "PMB", "PL", "PMN", "PSB", "PP", "PL", "AVANTE",…
#> $ codigo                <int> 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, …
#> $ sigla_12              <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ nome_13               <chr> "Deputado Estadual", "Deputado Estadual", "Deput…
#> $ cod_superior          <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
#> $ titular               <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE,…
#> $ contagem              <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
#> $ sigla_18              <chr> "PMB", "PL", "PMN", "PSB", "PP", "PL", "AVANTE",…
#> $ eleicoes_anteriores   <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ bens                  <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ total_de_bens         <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
#> $ ano_eleicao           <dbl> 2022, 2022, 2022, 2022, 2022, 2022, 2022, 2022, …
#> $ estado                <chr> "PE", "PE", "PE", "PE", "PE", "PE", "PE", "PE", …
```

O pacote contém o dataset que contém o código dos cargos dos candidatos
usados pelo portal.

``` r
raspa.divulga.dados.tse::df_cod_cargo
#> # A tibble: 7 × 2
#>   codigo descricao      
#>    <dbl> <chr>          
#> 1      3 governador     
#> 2      4 vice-governador
#> 3      5 senador        
#> 4      6 dep federal    
#> 5      7 dep estadual   
#> 6      9 1 suplente     
#> 7     10 2 suplente
```

Para baixar os dados com os bens de um candidato use a função captura
bens. A função recebe como argumeneto o id do candidato no TSE, que é
encontrado no dataset gerado pela função pega_info_cand. No exemplo
abaixo usaremos o id do 1° candidato gerado no dataset acima.

``` r
dados_bens <- raspa.divulga.dados.tse::captura_bens(id_candidato = 170001722253,
                                      uf = "PE",
                                      ano = 2022
                                      )
```

Se seu interesse é baixar os dados de multiplos candidatos recomendamos
usar a chunk abaixo, em breve adicionaremos uma função que baixa os bens
de todos os candidatos por cargo e uf.

``` r
dados_bens_dep_est_pe <- purrr::map_dfr(dados_dep_est_PE$id,
                                 purrr::possibly(
                                   raspa.divulga.dados.tse::captura_bens,
                                   otherwise = NULL)
                                 )
```

``` r
dplyr::glimpse(dados_bens_dep_est_pe)
#> Rows: 1,163
#> Columns: 16
#> $ nome_urna              <list> "ABELARDO CABRAL", "ABIMAEL DOS SANTOS PEREIRA…
#> $ id                     <list> 170001722253, 170001619693, 170001620391, 1700…
#> $ cpf                    <list> "04370218403", "04722253404", "02118569408", "…
#> $ descricao_cor_raca     <list> "BRANCA", "PARDA", "BRANCA", "BRANCA", "BRANCA…
#> $ descricao_estado_civil <list> "Casado(a)", "Casado(a)", "Solteiro(a)", "Solt…
#> $ descricao_sexo         <list> "MASC.", "MASC.", "FEM.", "FEM.", "MASC.", "MA…
#> $ emails                 <list> ["abelardojose877@gmail.com"], ["abimaelsantos…
#> $ grau_instrucao         <list> "Ensino Médio completo", "Ensino Médio complet…
#> $ numero                 <list> 35222, 22010, 40700, 40700, 11000, 11000, 1100…
#> $ nome_coligacao         <list> "PMB", "PL", "PSB", "PSB", "PP", "PP", "PP", "…
#> $ partido                <list> [35, "PMB", "Partido da Mulher Brasileira"], […
#> $ ocupacao               <list> "Motorista Particular", "Eletricista e Assemel…
#> $ ordem                  <int> 1, 1, 1, 2, 1, 3, 2, 2, 5, 9, 7, 3, 4, 8, 1, 6,…
#> $ descricaoDeTipoDeBem   <chr> "Veículo automotor terrestre: caminhão, automóv…
#> $ valor                  <dbl> 2000.00, 100000.00, 118000.00, 105000.00, 35000…
#> $ dataUltimaAtualizacao  <dbl> 1660588333000, 1660147205000, 1660154225000, 16…
```
